schema: '2.0'
stages:
  prepare:
    cmd: python -m src.features.prepare
    deps:
    - path: data/raw/train-00000-of-00002.parquet
      hash: md5
      md5: 50f0afaaab76f975e0c5d86caf7ed7c6
      size: 330245704
    - path: data/raw/train-00001-of-00002.parquet
      hash: md5
      md5: 033ad71bf3c8fea87b9d7966b753bbc5
      size: 391396716
    - path: src/features/prepare.py
      hash: md5
      md5: 7c47d816e8c5791db3443df132b62406
      size: 3855
    params:
      params.yaml:
        prepare.random_state: 2024
        prepare.test_size: 0.025
        prepare.train_size: 0.01
        prepare.valid_size: 0.7
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: dd99915e0d4a2e023b894785015ee57b
      size: 16708398
    - path: data/processed/X_train.csv
      hash: md5
      md5: 350cd9648736dbcc09f9a36bedfe78f5
      size: 20416276
    - path: data/processed/X_valid.csv
      hash: md5
      md5: b776f1d38e2f31a3718424f2ecca15ef
      size: 36312343
    - path: data/processed/y_test.csv
      hash: md5
      md5: 84eb56f8b084f16de8845a0c902a9aea
      size: 359
    - path: data/processed/y_train.csv
      hash: md5
      md5: a65f84b1a1c9f8520ac8e7a56548ff11
      size: 475
    - path: data/processed/y_valid.csv
      hash: md5
      md5: 841d28cbfbadc3bfff45f97916f041a0
      size: 827
  train:
    cmd: python -m src.models.train
    deps:
    - path: data/processed/X_train.csv
      hash: md5
      md5: 350cd9648736dbcc09f9a36bedfe78f5
      size: 20416276
    - path: data/processed/y_train.csv
      hash: md5
      md5: a65f84b1a1c9f8520ac8e7a56548ff11
      size: 475
    - path: src/models/train.py
      hash: md5
      md5: 2d941db9e57840e9cb19582f7be5f5d6
      size: 10007
    params:
      params.yaml:
        train.combinations: 1
        train.hyperparameters:
          algorithm:
          - VisualTransformer
          model_name:
          - google/vit-base-patch16-224
          batch_size:
          - 8
          learning_rate:
          - 1e-05
          num_epochs:
          - 1
          weight_decay:
          - 0.01
          momentum:
          - 0.9
          optimizer:
          - adam
        train.targets:
        - cat
        - dog
    outs:
    - path: models/
      hash: md5
      md5: b04c5fb7f129b2093e0fbf9ba5316cb8.dir
      size: 343297898
      nfiles: 1
    - path: parameters_list.json
      hash: md5
      md5: 2e8aa30229b5e9e7571d0305fe30bc86
      size: 332
    - path: parameters_run.json
      hash: md5
      md5: 02cd14437c10ca33079d83ac3a986ded
      size: 55
  evaluate:
    cmd: python -m src.models.evaluate
    deps:
    - path: data/processed/X_valid.csv
      hash: md5
      md5: b776f1d38e2f31a3718424f2ecca15ef
      size: 36312343
    - path: data/processed/y_valid.csv
      hash: md5
      md5: 841d28cbfbadc3bfff45f97916f041a0
      size: 827
    - path: models/
      hash: md5
      md5: b04c5fb7f129b2093e0fbf9ba5316cb8.dir
      size: 343297898
      nfiles: 1
    - path: src/models/evaluate.py
      hash: md5
      md5: f4a6e70b47247ad85cae938e845205bc
      size: 4788
    outs:
    - path: metrics/scores.json
      hash: md5
      md5: a4b6ed1ecd5ecdc72a847f3a47e02780
      size: 91
